/* -*- C++ -*- */
// vim: syntax=cpp

#include <satire.h>
#include "main.h"
#include "main-support.h"

int main(int argc, char **argv)
{
    using namespace SATIrE;
    /* Instantiate an analysis driver with the command line arguments, and
     * build a new data flow analysis instance for the appropriate
     * implementation class. MAIN_ANALYSIS is a macro whose definition is
     * generated by the newanalysis script. */
    AnalysisDriver analysisDriver(argc, argv);
    DataFlowAnalysis *analysis
        = new DataFlowAnalysis(new SATIrE::MAIN_ANALYSIS::Implementation());

    /* The addDependencies function is generated by the newanalysis script
     * in main-support.C to declare any dependencies that this analysis has
     * on other analyses. */
    addDependencies(analysis);

    /* Run any dependencies and then the analysis itself. */
    analysisDriver.run(analysis);
}
